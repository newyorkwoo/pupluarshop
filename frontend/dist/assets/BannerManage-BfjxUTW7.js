import{l as M,c as u,a as t,b as n,w as m,h as C,F as E,r as j,f as i,o as r,g,t as f,B as H,i as k,j as U,E as $,A as S}from"./index-BtfrMQy-.js";import{l as A,m as R,n as L,o as N}from"./admin-sw72sElP.js";import{_ as b}from"./BaseButton-zFFbkYxN.js";import{_ as y}from"./BaseInput-CNSxzZWL.js";import{B as D}from"./BaseModal-DmxaG8ja.js";import{L as F}from"./LoadingSpinner-Bsqd8eRR.js";const T={class:"flex items-center justify-between mb-6"},q={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={class:"aspect-[16/5] bg-brand-cream mb-3 flex items-center justify-center text-brand-gray text-sm"},I={class:"flex items-center justify-between"},Y={class:"text-sm font-medium"},z={class:"text-xs text-brand-gray"},J={class:"flex gap-2"},K=["onClick"],P=["onClick"],Q={class:"flex items-center gap-2"},W={class:"flex justify-end gap-3"},ae={__name:"BannerManage",setup(X){const B=i([]),c=i(!0),d=i(!1),o=i(null),v=i(!1),s=S({title:"",link:"",position:"HOME_HERO",sortOrder:0,active:!0});async function p(){c.value=!0;try{const a=await A();B.value=a.data||[]}finally{c.value=!1}}function w(a){o.value=a,Object.assign(s,a),d.value=!0}function x(){d.value=!1,o.value=null,Object.assign(s,{title:"",link:"",position:"HOME_HERO",sortOrder:0,active:!0})}async function _(){v.value=!0;try{o.value?await L(o.value.id,s):await N(s),await p(),x()}finally{v.value=!1}}async function O(a){confirm("確定刪除？")&&(await R(a.id),await p())}return M(()=>p()),(a,e)=>(r(),u("div",null,[t("div",T,[e[7]||(e[7]=t("h1",{class:"text-xl font-light tracking-wider"},"Banner 管理",-1)),n(b,{onClick:e[0]||(e[0]=l=>d.value=!0)},{default:m(()=>[...e[6]||(e[6]=[g("新增 Banner",-1)])]),_:1})]),c.value?(r(),C(F,{key:0})):(r(),u("div",q,[(r(!0),u(E,null,j(B.value,l=>(r(),u("div",{key:l.id,class:"border border-brand-light p-4"},[t("div",G,f(l.title||"Banner Image"),1),t("div",I,[t("div",null,[t("p",Y,f(l.title),1),t("p",z,f(l.position)+" · 排序: "+f(l.sortOrder),1)]),t("div",J,[t("button",{onClick:V=>w(l),class:"text-xs underline"},"編輯",8,K),t("button",{onClick:V=>O(l),class:"text-xs underline text-red-500"},"刪除",8,P)])])]))),128))])),n(D,{show:d.value,onClose:x,title:o.value?"編輯 Banner":"新增 Banner"},{default:m(()=>[t("form",{onSubmit:H(_,["prevent"]),class:"space-y-4"},[n(y,{label:"標題",modelValue:s.title,"onUpdate:modelValue":e[1]||(e[1]=l=>s.title=l),required:""},null,8,["modelValue"]),n(y,{label:"連結",modelValue:s.link,"onUpdate:modelValue":e[2]||(e[2]=l=>s.link=l)},null,8,["modelValue"]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-xs uppercase tracking-wider text-brand-charcoal mb-1"},"位置",-1)),k(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.position=l),class:"input-field w-full"},[...e[8]||(e[8]=[t("option",{value:"HOME_HERO"},"首頁主圖",-1),t("option",{value:"HOME_SUB"},"首頁副圖",-1),t("option",{value:"CATEGORY"},"分類頁",-1)])],512),[[U,s.position]])]),n(y,{label:"排序",type:"number",modelValue:s.sortOrder,"onUpdate:modelValue":e[4]||(e[4]=l=>s.sortOrder=l),modelModifiers:{number:!0}},null,8,["modelValue"]),t("div",Q,[k(t("input",{id:"bannerActive",type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>s.active=l)},null,512),[[$,s.active]]),e[10]||(e[10]=t("label",{for:"bannerActive",class:"text-sm"},"啟用",-1))]),t("div",W,[n(b,{variant:"secondary",onClick:x},{default:m(()=>[...e[11]||(e[11]=[g("取消",-1)])]),_:1}),n(b,{type:"submit",loading:v.value},{default:m(()=>[...e[12]||(e[12]=[g("儲存",-1)])]),_:1},8,["loading"])])],32)]),_:1},8,["show","title"])]))}};export{ae as default};
