import{D as y,c as w,a as n,B as k,b as l,i as E,E as P,g as i,w as u,t as _,m as U,A as g,e as q,f as x,p as A,o as c}from"./index-BtfrMQy-.js";import{_ as f}from"./BaseInput-CNSxzZWL.js";import{_ as B}from"./BaseButton-zFFbkYxN.js";const C=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function N(a){return C.test(a)}function R(a){return a&&a.length>=8&&/[a-z]/.test(a)&&/[A-Z]/.test(a)&&/\d/.test(a)}const S={class:"min-h-[70vh] flex items-center justify-center px-4"},D={class:"w-full max-w-md"},M={class:"flex items-start gap-2"},$={for:"agree",class:"text-xs text-brand-gray"},j={key:0,class:"text-red-500 text-sm"},z={class:"mt-6 text-center text-sm text-brand-gray"},O={__name:"Register",setup(a){const v=A(),V=y(),s=g({name:"",email:"",password:"",confirmPassword:"",agree:!1}),r=g({name:"",email:"",password:"",confirmPassword:""}),m=x(""),p=x(!1);async function b(){var e,d;Object.keys(r).forEach(t=>r[t]=""),m.value="";let o=!0;if(s.name||(r.name="請輸入姓名",o=!1),N(s.email)||(r.email="請輸入有效的電子郵件",o=!1),R(s.password)||(r.password="密碼需至少8位，包含大小寫及數字",o=!1),s.password!==s.confirmPassword&&(r.confirmPassword="密碼不一致",o=!1),s.agree||(m.value="請同意服務條款與隱私權政策",o=!1),!!o){p.value=!0;try{await V.register({name:s.name,email:s.email,password:s.password}),v.push("/")}catch(t){m.value=((d=(e=t.response)==null?void 0:e.data)==null?void 0:d.message)||"註冊失敗，請稍後再試"}finally{p.value=!1}}}return(o,e)=>{const d=q("router-link");return c(),w("div",S,[n("div",D,[e[12]||(e[12]=n("h1",{class:"text-2xl font-light tracking-wider text-center mb-8"},"建立帳號",-1)),n("form",{onSubmit:k(b,["prevent"]),class:"space-y-4"},[l(f,{label:"姓名",modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.name=t),error:r.name,required:""},null,8,["modelValue","error"]),l(f,{label:"電子郵件",type:"email",modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=t=>s.email=t),error:r.email,required:""},null,8,["modelValue","error"]),l(f,{label:"密碼",type:"password",modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=t=>s.password=t),error:r.password,required:""},null,8,["modelValue","error"]),l(f,{label:"確認密碼",type:"password",modelValue:s.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=t=>s.confirmPassword=t),error:r.confirmPassword,required:""},null,8,["modelValue","error"]),n("div",M,[E(n("input",{id:"agree",type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=t=>s.agree=t),class:"mt-1"},null,512),[[P,s.agree]]),n("label",$,[e[7]||(e[7]=i("我已閱讀並同意 ",-1)),l(d,{to:"/terms",class:"underline"},{default:u(()=>[...e[5]||(e[5]=[i("服務條款",-1)])]),_:1}),e[8]||(e[8]=i(" 及 ",-1)),l(d,{to:"/privacy",class:"underline"},{default:u(()=>[...e[6]||(e[6]=[i("隱私權政策",-1)])]),_:1})])]),m.value?(c(),w("p",j,_(m.value),1)):U("",!0),l(B,{type:"submit",loading:p.value,class:"w-full"},{default:u(()=>[...e[9]||(e[9]=[i("註冊",-1)])]),_:1},8,["loading"])],32),n("p",z,[e[11]||(e[11]=i("已有帳號？ ",-1)),l(d,{to:"/login",class:"text-brand-black underline"},{default:u(()=>[...e[10]||(e[10]=[i("立即登入",-1)])]),_:1})])])])}}};export{O as default};
