import{D as z,l as L,c as l,a as t,F as k,r as w,B as V,b as a,w as y,m as x,H as M,I as j,f as m,A as _,p as D,o,q as F,t as r,g,J as T}from"./index-BtfrMQy-.js";import{_ as d}from"./BaseInput-CNSxzZWL.js";import{_ as v}from"./BaseButton-zFFbkYxN.js";const q={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},E={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},H={class:"space-y-1"},I=["onClick"],J={class:"md:col-span-3"},O={key:0},R={key:1},G={class:"flex justify-between items-center mb-4"},K={key:0,class:"grid gap-4"},Q={class:"font-medium text-sm"},W={class:"text-sm text-brand-gray"},X={class:"text-sm text-brand-gray"},Y={class:"text-sm text-brand-gray"},Z={key:1,class:"text-sm text-brand-gray"},ee={key:2},ne={__name:"Account",setup(se){const h=D(),P=z(),u=m("profile"),C=[{key:"profile",label:"個人資料"},{key:"addresses",label:"配送地址"},{key:"password",label:"變更密碼"}],n=_({name:"",email:"",phone:""}),c=m([]),f=m(!1),A=m(!1),i=_({current:"",newPass:"",confirm:""}),b=m(!1);async function U(){try{const p=await M();Object.assign(n,p.data)}catch{}}async function S(){try{const p=await j();c.value=p.data}catch{}}async function B(){f.value=!0;try{await T(n)}finally{f.value=!1}}async function N(){b.value=!0;try{}finally{b.value=!1}}function $(){P.logout(),h.push("/login")}return L(()=>{U(),S()}),(p,e)=>(o(),l("div",q,[e[14]||(e[14]=t("h1",{class:"text-2xl font-light tracking-wider mb-8"},"我的帳號",-1)),t("div",E,[t("nav",H,[(o(),l(k,null,w(C,s=>t("button",{key:s.key,onClick:te=>u.value=s.key,class:F(["block w-full text-left px-4 py-2 text-sm transition-colors",u.value===s.key?"bg-brand-black text-white":"text-brand-charcoal hover:bg-brand-light"])},r(s.label),11,I)),64)),t("button",{onClick:$,class:"block w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-red-50"},"登出")]),t("div",J,[u.value==="profile"?(o(),l("div",O,[e[8]||(e[8]=t("h2",{class:"text-sm uppercase tracking-[0.15em] font-semibold mb-4"},"個人資料",-1)),t("form",{onSubmit:V(B,["prevent"]),class:"space-y-4 max-w-md"},[a(d,{label:"姓名",modelValue:n.name,"onUpdate:modelValue":e[0]||(e[0]=s=>n.name=s)},null,8,["modelValue"]),a(d,{label:"電子郵件",type:"email",modelValue:n.email,"onUpdate:modelValue":e[1]||(e[1]=s=>n.email=s),disabled:""},null,8,["modelValue"]),a(d,{label:"電話",modelValue:n.phone,"onUpdate:modelValue":e[2]||(e[2]=s=>n.phone=s)},null,8,["modelValue"]),a(v,{type:"submit",loading:f.value},{default:y(()=>[...e[7]||(e[7]=[g("儲存變更",-1)])]),_:1},8,["loading"])],32)])):x("",!0),u.value==="addresses"?(o(),l("div",R,[t("div",G,[e[10]||(e[10]=t("h2",{class:"text-sm uppercase tracking-[0.15em] font-semibold"},"配送地址",-1)),a(v,{variant:"secondary",size:"sm",onClick:e[3]||(e[3]=s=>A.value=!0)},{default:y(()=>[...e[9]||(e[9]=[g("新增地址",-1)])]),_:1})]),c.value.length?(o(),l("div",K,[(o(!0),l(k,null,w(c.value,s=>(o(),l("div",{key:s.id,class:"border border-brand-light p-4"},[t("p",Q,r(s.name),1),t("p",W,r(s.phone),1),t("p",X,r(s.city)+" "+r(s.district)+" "+r(s.zipCode),1),t("p",Y,r(s.addressLine),1),e[11]||(e[11]=t("div",{class:"mt-2 flex gap-2"},[t("button",{class:"text-xs underline"},"編輯"),t("button",{class:"text-xs underline text-red-500"},"刪除")],-1))]))),128))])):(o(),l("p",Z,"尚未新增配送地址"))])):x("",!0),u.value==="password"?(o(),l("div",ee,[e[13]||(e[13]=t("h2",{class:"text-sm uppercase tracking-[0.15em] font-semibold mb-4"},"變更密碼",-1)),t("form",{onSubmit:V(N,["prevent"]),class:"space-y-4 max-w-md"},[a(d,{label:"目前密碼",type:"password",modelValue:i.current,"onUpdate:modelValue":e[4]||(e[4]=s=>i.current=s)},null,8,["modelValue"]),a(d,{label:"新密碼",type:"password",modelValue:i.newPass,"onUpdate:modelValue":e[5]||(e[5]=s=>i.newPass=s)},null,8,["modelValue"]),a(d,{label:"確認新密碼",type:"password",modelValue:i.confirm,"onUpdate:modelValue":e[6]||(e[6]=s=>i.confirm=s)},null,8,["modelValue"]),a(v,{type:"submit",loading:b.value},{default:y(()=>[...e[12]||(e[12]=[g("更新密碼",-1)])]),_:1},8,["loading"])],32)])):x("",!0)])])]))}};export{ne as default};
