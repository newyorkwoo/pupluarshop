import{D as b,c as p,a as r,B as V,b as a,t as k,m as h,w as m,g as n,A as f,f as c,e as B,p as N,u as S,o as w}from"./index-BtfrMQy-.js";import{_ as x}from"./BaseInput-CNSxzZWL.js";import{_ as q}from"./BaseButton-zFFbkYxN.js";const C={class:"min-h-[70vh] flex items-center justify-center px-4"},A={class:"w-full max-w-md"},D={key:0,class:"text-red-500 text-sm"},E={class:"mt-6 text-center text-sm space-y-2"},L={class:"text-brand-gray"},M={__name:"Login",setup(R){const g=N(),_=S(),v=b(),t=f({email:"",password:""}),s=f({email:"",password:""}),o=c(""),i=c(!1);async function y(){var d,e;if(s.email="",s.password="",o.value="",!t.email){s.email="請輸入電子郵件";return}if(!t.password){s.password="請輸入密碼";return}i.value=!0;try{await v.login(t.email,t.password),g.push(_.query.redirect||"/")}catch(l){o.value=((e=(d=l.response)==null?void 0:d.data)==null?void 0:e.message)||"登入失敗，請檢查帳號密碼"}finally{i.value=!1}}return(d,e)=>{const l=B("router-link");return w(),p("div",C,[r("div",A,[e[6]||(e[6]=r("h1",{class:"text-2xl font-light tracking-wider text-center mb-8"},"登入",-1)),r("form",{onSubmit:V(y,["prevent"]),class:"space-y-4"},[a(x,{label:"電子郵件",type:"email",modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=u=>t.email=u),error:s.email,required:""},null,8,["modelValue","error"]),a(x,{label:"密碼",type:"password",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=u=>t.password=u),error:s.password,required:""},null,8,["modelValue","error"]),o.value?(w(),p("p",D,k(o.value),1)):h("",!0),a(q,{type:"submit",loading:i.value,class:"w-full"},{default:m(()=>[...e[2]||(e[2]=[n("登入",-1)])]),_:1},8,["loading"])],32),r("div",E,[a(l,{to:"/forgot-password",class:"text-brand-gray hover:text-brand-black underline"},{default:m(()=>[...e[3]||(e[3]=[n("忘記密碼？",-1)])]),_:1}),r("p",L,[e[5]||(e[5]=n("還沒有帳號？ ",-1)),a(l,{to:"/register",class:"text-brand-black underline"},{default:m(()=>[...e[4]||(e[4]=[n("立即註冊",-1)])]),_:1})])])])])}}};export{M as default};
