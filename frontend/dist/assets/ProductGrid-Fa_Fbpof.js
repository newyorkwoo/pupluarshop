import{L as b,f as p,D as v,N as g,e as k,o as r,h as y,w as S,a as s,B as C,x as d,c as n,m as h,t as u,y as x,q as B,F as w,r as W}from"./index-BtfrMQy-.js";const _=b("wishlist",()=>{const t=p(JSON.parse(localStorage.getItem("wishlist"))||[]),i=p(!1);function l(){localStorage.setItem("wishlist",JSON.stringify(t.value))}async function a(){if(v().isAuthenticated){i.value=!0;try{const{data:o}=await g.getWishlist();t.value=o,l()}finally{i.value=!1}}}function c(e){return t.value.some(o=>o.productId===e||o.id===e)}async function m(e){const o=v();c(e.id)?(t.value=t.value.filter(f=>f.productId!==e.id&&f.id!==e.id),o.isAuthenticated&&await g.removeFromWishlist(e.id)):(t.value.push({productId:e.id,name:e.name,price:e.price,imageUrl:e.imageUrl,slug:e.slug}),o.isAuthenticated&&await g.addToWishlist(e.id)),l()}return{items:t,loading:i,fetchWishlist:a,isInWishlist:c,toggle:m}}),A={class:"relative overflow-hidden bg-brand-cream aspect-[3/4]"},I=["src","alt"],P=["fill"],L={key:0,class:"absolute top-3 left-3 bg-brand-error text-white text-[10px] px-2 py-1 uppercase tracking-wider"},N={class:"pt-3 pb-1"},$={class:"text-[10px] uppercase tracking-widest text-brand-gray mb-1"},j={class:"text-sm text-brand-charcoal leading-snug mb-2 line-clamp-2"},z={class:"flex items-center gap-2"},F={key:0,class:"text-sm font-medium text-brand-error"},O={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(t){const i=_();return(l,a)=>{const c=k("router-link");return r(),y(c,{to:`/products/${t.product.slug}`,class:"product-card block"},{default:S(()=>[s("div",A,[s("img",{src:t.product.imageUrl||"/placeholder.jpg",alt:t.product.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"},null,8,I),s("button",{onClick:a[0]||(a[0]=C(m=>d(i).toggle(t.product),["prevent"])),class:"absolute top-3 right-3 p-2 bg-white/80 rounded-full hover:bg-white transition-colors"},[(r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:d(i).isInWishlist(t.product.id)?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[...a[1]||(a[1]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],8,P))]),t.product.salePrice?(r(),n("span",L," Sale ")):h("",!0)]),s("div",N,[s("p",$,u(t.product.brand),1),s("h3",j,u(t.product.name),1),s("div",z,[t.product.salePrice?(r(),n("span",F,u(d(x)(t.product.salePrice)),1)):h("",!0),s("span",{class:B(t.product.salePrice?"line-through text-brand-gray text-xs":"text-sm font-medium")},u(d(x)(t.product.price)),3)])])]),_:1},8,["to"])}}},U={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 lg:gap-6"},q={key:0,class:"text-center py-20 text-brand-gray"},J={__name:"ProductGrid",props:{products:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(t){return(i,l)=>(r(),n(w,null,[s("div",U,[(r(!0),n(w,null,W(t.products,a=>(r(),y(O,{key:a.id,product:a},null,8,["product"]))),128))]),t.products.length===0&&!t.loading?(r(),n("div",q,[...l[0]||(l[0]=[s("p",{class:"text-sm"},"目前沒有符合條件的商品",-1)])])):h("",!0)],64))}};export{J as _,_ as u};
