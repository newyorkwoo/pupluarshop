import{L as D,f as i,o as r,c as l,a as t,t as u,q as C,m as k,F as y,r as f,O as $,n as E,l as N,b as d,x as p,y as _,w as S}from"./index-BtfrMQy-.js";import{a as O}from"./admin-sw72sElP.js";import{_ as R}from"./DataTable-D28Fm2fi.js";const V=D("admin",()=>{const e=i(null),n=i(!1);async function a(){n.value=!0;try{const{data:g}=await O.getDashboard();e.value=g}finally{n.value=!1}}return{dashboard:e,loading:n,fetchDashboard:a}}),I={class:"bg-white rounded-lg border border-gray-200 p-6"},L={class:"text-xs uppercase tracking-wider text-brand-gray mb-1"},P={class:"text-2xl font-bold text-brand-black"},m={__name:"StatsCard",props:{title:String,value:[String,Number],change:Number},setup(e){return(n,a)=>(r(),l("div",I,[t("p",L,u(e.title),1),t("p",P,u(e.value),1),e.change?(r(),l("p",{key:0,class:C(["text-xs mt-1",e.change>0?"text-brand-success":"text-brand-error"])},u(e.change>0?"+":"")+u(e.change)+"% ",3)):k("",!0)]))}},A={class:"bg-white rounded-lg border border-gray-200 p-6"},B={class:"text-sm font-semibold mb-4"},T={class:"h-48 flex items-end gap-1"},z=["title"],F={key:0,class:"flex gap-1 mt-2"},w={__name:"ChartWidget",props:{title:String,data:{type:Array,default:()=>[]},labels:Array},setup(e){const n=e,a=E(()=>Math.max(...n.data,1));return(g,h)=>(r(),l("div",A,[t("h3",B,u(e.title),1),t("div",T,[(r(!0),l(y,null,f(e.data,(c,o)=>{var b;return r(),l("div",{key:o,class:"flex-1 bg-brand-gold/20 hover:bg-brand-gold/40 transition-colors rounded-t",style:$({height:`${c/a.value*100}%`}),title:`${((b=e.labels)==null?void 0:b[o])||o}: ${c}`},null,12,z)}),128))]),e.labels?(r(),l("div",F,[(r(!0),l(y,null,f(e.labels,(c,o)=>(r(),l("span",{key:o,class:"flex-1 text-center text-[10px] text-brand-gray truncate"},u(c),1))),128))])):k("",!0)]))}},G={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},H={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},M={class:"bg-white border border-brand-light p-6"},U={class:"bg-white border border-brand-light p-6"},q={class:"bg-white border border-brand-light p-6"},K={__name:"Dashboard",setup(e){const n=V(),a=i({monthlyRevenue:245e4,revenueChange:12.5,monthlyOrders:186,ordersChange:8.3,newUsers:42,usersChange:-2.1,avgOrderValue:13172,avgChange:3.8}),g=i({labels:["一","二","三","四","五","六","日"],values:[38e4,42e4,35e4,39e4,41e4,28e4,22e4]}),h=i({labels:["一","二","三","四","五","六","日"],values:[28,32,26,30,31,21,18]}),c=i([{id:"ORD-20241201-001",customer:"王小明",amount:"NT$52,000",status:"PENDING",date:"2024-12-01"},{id:"ORD-20241201-002",customer:"李美玲",amount:"NT$18,500",status:"SHIPPED",date:"2024-12-01"},{id:"ORD-20241130-003",customer:"張大華",amount:"NT$89,000",status:"DELIVERED",date:"2024-11-30"}]),o=[{key:"id",label:"訂單編號"},{key:"customer",label:"顧客"},{key:"amount",label:"金額"},{key:"status",label:"狀態"},{key:"date",label:"日期"}];function b(v){return{PENDING:"bg-yellow-100 text-yellow-700",SHIPPED:"bg-blue-100 text-blue-700",DELIVERED:"bg-green-100 text-green-700",CANCELLED:"bg-red-100 text-red-700"}[v]||"bg-gray-100 text-gray-600"}return N(async()=>{try{await n.fetchDashboard()}catch{}}),(v,s)=>(r(),l("div",null,[s[3]||(s[3]=t("h1",{class:"text-xl font-light tracking-wider mb-8"},"儀表板",-1)),t("div",G,[d(m,{title:"本月營收",value:p(_)(a.value.monthlyRevenue),change:a.value.revenueChange},null,8,["value","change"]),d(m,{title:"本月訂單",value:a.value.monthlyOrders,change:a.value.ordersChange},null,8,["value","change"]),d(m,{title:"新會員",value:a.value.newUsers,change:a.value.usersChange},null,8,["value","change"]),d(m,{title:"平均客單價",value:p(_)(a.value.avgOrderValue),change:a.value.avgChange},null,8,["value","change"])]),t("div",H,[t("div",M,[s[0]||(s[0]=t("h2",{class:"text-sm uppercase tracking-wider font-semibold mb-4"},"最近 7 天營收",-1)),d(w,{data:g.value},null,8,["data"])]),t("div",U,[s[1]||(s[1]=t("h2",{class:"text-sm uppercase tracking-wider font-semibold mb-4"},"訂單趨勢",-1)),d(w,{data:h.value},null,8,["data"])])]),t("div",q,[s[2]||(s[2]=t("h2",{class:"text-sm uppercase tracking-wider font-semibold mb-4"},"最新訂單",-1)),d(R,{columns:o,rows:c.value},{"cell-status":S(({value:x})=>[t("span",{class:C(["text-xs px-2 py-0.5 rounded-full",b(x)])},u(x),3)]),_:1},8,["rows"])])]))}};export{K as default};
