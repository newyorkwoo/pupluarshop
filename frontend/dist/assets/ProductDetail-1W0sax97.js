import{o as l,c as s,a as t,F as p,r as x,q as _,f as d,t as u,s as N,k as T,l as W,b as f,h as C,x as S,y as z,m as h,w as q,n as y,u as I,g as V}from"./index-BtfrMQy-.js";import{u as A,_ as D}from"./ProductGrid-Fa_Fbpof.js";import{g as F}from"./product-Ch8gIIad.js";import{_ as H}from"./BaseBreadcrumb-DsToefPo.js";import{_ as E}from"./BaseButton-zFFbkYxN.js";import{L as G}from"./LoadingSpinner-Bsqd8eRR.js";const R={class:"flex flex-col lg:flex-row gap-6"},U={class:"hidden lg:flex flex-col gap-2 w-20"},J=["onClick"],K=["src","alt"],O=["src","alt"],Q={class:"flex lg:hidden justify-center gap-2 mt-2"},X=["onClick"],Y={__name:"ProductGallery",props:{images:{type:Array,default:()=>["/placeholder.jpg"]},alt:{type:String,default:""}},emits:["zoom"],setup(i){const o=d(0);return(c,n)=>(l(),s("div",R,[t("div",U,[(l(!0),s(p,null,x(i.images,(e,a)=>(l(),s("button",{key:a,onClick:m=>o.value=a,class:_(["border overflow-hidden aspect-square",o.value===a?"border-brand-black":"border-gray-200"])},[t("img",{src:e,class:"w-full h-full object-cover",alt:`Thumbnail ${a+1}`},null,8,K)],10,J))),128))]),t("div",{class:"flex-1 bg-brand-cream aspect-[3/4] overflow-hidden cursor-zoom-in",onClick:n[0]||(n[0]=e=>c.$emit("zoom",i.images[o.value]))},[t("img",{src:i.images[o.value]||"/placeholder.jpg",class:"w-full h-full object-cover",alt:i.alt},null,8,O)]),t("div",Q,[(l(!0),s(p,null,x(i.images,(e,a)=>(l(),s("button",{key:a,onClick:m=>o.value=a,class:_(["w-2 h-2 rounded-full",o.value===a?"bg-brand-black":"bg-gray-300"])},null,10,X))),128))])]))}},Z={class:"flex flex-wrap gap-2"},ee=["onClick"],te={__name:"SizeSelector",props:{sizes:{type:Array,default:()=>[]},modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(i){return(o,c)=>(l(),s("div",null,[c[0]||(c[0]=t("h4",{class:"text-xs font-semibold uppercase tracking-wider mb-3"},"尺寸",-1)),t("div",Z,[(l(!0),s(p,null,x(i.sizes,n=>(l(),s("button",{key:n,onClick:e=>o.$emit("update:modelValue",n),class:_(["px-4 py-2 border text-xs uppercase transition-all",i.modelValue===n?"border-brand-black bg-brand-black text-white":"border-gray-300 hover:border-brand-black"])},u(n),11,ee))),128))])]))}},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},se={class:"grid grid-cols-1 lg:grid-cols-2 gap-10"},ae={class:"text-xs uppercase tracking-[0.2em] text-brand-gray mb-1"},re={class:"text-2xl font-light mb-4"},oe={class:"flex items-center gap-3 mb-6"},ne={key:0,class:"text-lg text-red-600 font-medium"},ie={key:1,class:"text-xs text-red-600 ml-1"},ue={class:"flex gap-3 mb-8"},ce=["fill"],de={class:"border-t border-brand-light"},me={class:"py-4 text-sm uppercase tracking-wider cursor-pointer flex justify-between items-center"},ge=["innerHTML"],ve={key:0,class:"mt-16"},pe={key:2,class:"text-center py-20"},ke={__name:"ProductDetail",setup(i){const o=I(),c=N(),n=A(),e=d(null),a=d(!0),m=d(!1),b=d(""),k=d([]),P=y(()=>e.value&&n.isInWishlist(e.value.id)),j=y(()=>e.value?[{label:"首頁",to:"/"},{label:e.value.categoryName||"全部商品",to:"/products"},{label:e.value.name}]:[{label:"首頁",to:"/"}]),B=y(()=>e.value?[{title:"商品描述",content:e.value.description||"暫無描述"},{title:"材質與成分",content:e.value.material||"請參閱吊牌"},{title:"尺寸指南",content:"請參閱品牌官方尺寸表，如有疑問歡迎聯繫客服"},{title:"配送與退換",content:"免費標準配送 (5-7 個工作天)<br/>30 天免費退貨<br/>請保持商品吊牌完整"}]:[]);async function w(){a.value=!0;try{const g=await F(o.params.slug);e.value=g.data}catch{e.value=null}finally{a.value=!1}}async function L(){var g;if(!((g=e.value.sizes)!=null&&g.length&&!b.value)){m.value=!0;try{await c.addItem({productId:e.value.id,size:b.value,quantity:1})}finally{m.value=!1}}}function M(){e.value&&n.toggle(e.value)}return T(()=>o.params.slug,()=>w()),W(()=>w()),(g,r)=>{var $;return l(),s("div",le,[f(H,{items:j.value,class:"mb-6"},null,8,["items"]),a.value?(l(),C(G,{key:0})):e.value?(l(),s(p,{key:1},[t("div",se,[f(Y,{images:e.value.images||[]},null,8,["images"]),t("div",null,[t("p",ae,u(e.value.brand),1),t("h1",re,u(e.value.name),1),t("div",oe,[e.value.salePrice?(l(),s("span",ne,u(S(z)(e.value.salePrice)),1)):h("",!0),t("span",{class:_(e.value.salePrice?"line-through text-brand-gray text-sm":"text-lg font-medium")},u(S(z)(e.value.price)),3),e.value.salePrice?(l(),s("span",ie,"-"+u(Math.round((1-e.value.salePrice/e.value.price)*100))+"%",1)):h("",!0)]),($=e.value.sizes)!=null&&$.length?(l(),C(te,{key:0,sizes:e.value.sizes,modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=v=>b.value=v),class:"mb-6"},null,8,["sizes","modelValue"])):h("",!0),t("div",ue,[f(E,{onClick:L,loading:m.value,class:"flex-1"},{default:q(()=>[...r[1]||(r[1]=[V("加入購物車",-1)])]),_:1},8,["loading"]),t("button",{onClick:M,class:"w-12 h-12 border border-brand-black flex items-center justify-center hover:bg-brand-light transition-colors"},[(l(),s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:P.value?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[...r[2]||(r[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],8,ce))])]),t("div",de,[(l(!0),s(p,null,x(B.value,v=>(l(),s("details",{key:v.title,class:"border-b border-brand-light"},[t("summary",me,[V(u(v.title)+" ",1),r[3]||(r[3]=t("svg",{class:"w-4 h-4 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 9l-7 7-7-7"})],-1))]),t("div",{class:"pb-4 text-sm text-brand-gray leading-relaxed",innerHTML:v.content},null,8,ge)]))),128))])])]),k.value.length?(l(),s("section",ve,[r[4]||(r[4]=t("h2",{class:"section-title text-center mb-8"},"你可能也喜歡",-1)),f(D,{products:k.value},null,8,["products"])])):h("",!0)],64)):(l(),s("div",pe,[...r[5]||(r[5]=[t("p",{class:"text-brand-gray"},"商品不存在",-1)])]))])}}};export{ke as default};
